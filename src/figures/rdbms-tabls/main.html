<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>IT Asset Management Schema Diagram (vis-network)</title>
  <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: Arial, sans-serif;
      background: #f5f5f5;
    }
    #network {
      width: 100%;
      height: 100vh;
      border-top: 3px solid #ccc;
      background: #ffffff;
    }
  </style>
</head>
<body>
  <div id="network"></div>

  <script>
    // Define nodes (tables + notes)
    const nodes = new vis.DataSet([
      {
        id: 1,
        label:
          "<b>Locations</b>\n" +
          "<b>PK</b> location_id : INTEGER\n" +
          "data_center : VARCHAR(100)\n" +
          "city : VARCHAR(100)\n" +
          "region : VARCHAR(50)",
        shape: "box",
        x: -250,
        y: 0,
        color: {
          background: "#b6e6b6",
          border: "#60a460"
        },
        font: {
          multi: "html",
          align: "left"
        },
        widthConstraint: {
          minimum: 180
        },
        physics: false
      },
      {
        id: 2,
        label:
          "<b>Servers</b>\n" +
          "<b>PK</b> server_id : INTEGER\n" +
          "hostname : VARCHAR(255)\n" +
          "ip_address : VARCHAR(15)\n" +
          "<i>FK</i> location_id : INTEGER\n" +
          "purchase_date : DATE\n" +
          "status : VARCHAR(20)",
        shape: "box",
        x: 0,
        y: 0,
        color: {
          background: "#b6d4ff",
          border: "#5a82c7"
        },
        font: {
          multi: "html",
          align: "left"
        },
        widthConstraint: {
          minimum: 220
        },
        physics: false
      },
      {
        id: 3,
        label:
          "<b>Applications</b>\n" +
          "<b>PK</b> app_id : INTEGER\n" +
          "app_name : VARCHAR(255)\n" +
          "version : VARCHAR(50)\n" +
          "<i>FK</i> server_id : INTEGER\n" +
          "owner_team : VARCHAR(100)",
        shape: "box",
        x: 250,
        y: 0,
        color: {
          background: "#ffd59b",
          border: "#d78a2c"
        },
        font: {
          multi: "html",
          align: "left"
        },
        widthConstraint: {
          minimum: 220
        },
        physics: false
      },
      // Note near Applications: "Each application hosted on exactly one server"
      {
        id: 4,
        label: "Note:\nEach application hosted on exactly one server",
        shape: "box",
        x: 450,
        y: -120,
        color: {
          background: "#fff9c4",
          border: "#f0c000"
        },
        font: {
          align: "left"
        },
        physics: false
      },
      // Note near Servers: "Each server located in exactly one data center"
      {
        id: 5,
        label: "Note:\nEach server located in exactly one data center",
        shape: "box",
        x: -50,
        y: -140,
        color: {
          background: "#fff9c4",
          border: "#f0c000"
        },
        font: {
          align: "left"
        },
        physics: false
      },
      // Limitation note: "What if applications depend on other applications?"
      {
        id: 6,
        label: "Potential limitation:\nWhat if applications depend on other applications?",
        shape: "box",
        x: 250,
        y: 160,
        color: {
          background: "#f2f2f2",
          border: "#999"
        },
        font: {
          align: "left"
        },
        physics: false
      }
    ]);

    // Define edges (relationships)
    const edges = new vis.DataSet([
      {
        from: 2,          // Servers
        to: 1,            // Locations
        label: "LOCATED_IN (M:1)",
        arrows: {
          to: {
            enabled: true,
            type: "arrow"
          }
        },
        color: {
          color: "#000000"
        },
        font: {
          align: "middle",
          size: 12
        },
        smooth: {
          enabled: true,
          type: "cubicBezier"
        }
      },
      {
        from: 3,          // Applications
        to: 2,            // Servers
        label: "HOSTED_ON (M:1)",
        arrows: {
          to: {
            enabled: true,
            type: "arrow"
          }
        },
        color: {
          color: "#000000"
        },
        font: {
          align: "middle",
          size: 12
        },
        smooth: {
          enabled: true,
          type: "cubicBezier"
        }
      },
      // Dotted line from Applications to limitation note
      {
        from: 3,
        to: 6,
        label: "?",
        dashes: true,
        arrows: {
          to: {
            enabled: true,
            type: "arrow"
          }
        },
        color: {
          color: "#666666"
        },
        font: {
          size: 12,
          align: "horizontal"
        },
        smooth: {
          enabled: true,
          type: "cubicBezier"
        }
      }
    ]);

    // Create network
    const container = document.getElementById("network");
    const data = {
      nodes: nodes,
      edges: edges
    };
    const options = {
      interaction: {
        dragNodes: true,
        zoomView: true,
        dragView: true
      },
      physics: {
        enabled: false
      },
      layout: {
        improvedLayout: true
      },
      edges: {
        width: 1.5
      }
    };

    const network = new vis.Network(container, data, options);

    // Optional: fit all on load
    network.fit({
      animation: {
        duration: 500,
        easing: "easeInOutQuad"
      }
    });
  </script>
</body>
</html>

